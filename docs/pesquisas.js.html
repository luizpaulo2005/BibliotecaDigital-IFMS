<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: pesquisas.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: pesquisas.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import Head from "next/head";
import axios from "axios";
import HDPagInicial from "../../../../components/header/paginicial";
import { format, parseISO } from "date-fns";
import { useState, useEffect } from "react";
import Link from "next/link";

/**   

* getServerSideProps
* Função que realiza a busca os dados na API
* @namespace
* @property {string} response - Variável que recebe os dados brutos da API
* @property {string} attributes - Variável que converte os dados de response em JSON
*/

export const getServerSideProps = async (context) => {
  const response = await axios.get(process.env.URL_API + "/pesquisa");
  const attributes = await response.data;
  return {
    props: {
      attributes,
    },
  };
};

export default function TodasPesquisas({ attributes }) {
  const [consulta, setConsulta] = useState("");
  const [itensporPagina, setItensporPagina] = useState(10);
  const [paginasRecorrentes, setPaginasRecorrentes] = useState(0);

  const keys = ["titulo"];

  const filtro = (item) => {
    return item.filter((item) =>
      keys.some((key) => item[key].toLowerCase().includes(consultaGeral))
    );
  };

  const consultaGeral = consulta.toLowerCase();
  const paginas = Math.ceil(filtro(attributes).length / itensporPagina);
  const startIndex = paginasRecorrentes * itensporPagina;
  const endIndex = startIndex + itensporPagina;
  const pesquisasfiltradas = filtro(attributes).slice(startIndex, endIndex);

  useEffect(() => {
    setPaginasRecorrentes(0);
  }, [setItensporPagina]);

  return (
    &lt;div className="container-fluid g-0">
      &lt;Head>
        &lt;title>Pesquisas&lt;/title>
      &lt;/Head>
      &lt;HDPagInicial />
      &lt;div className="container border rounded mt-2 p-3">
        &lt;div className="container d-flex justify-content-center">
          &lt;form className="d-flex" role="search">
            &lt;input
              className="form-control filtro"
              type="search"
              placeholder="Pesquisar"
              aria-label="Search"
              onChange={(e) => setConsulta(e.target.value)}
            />
          &lt;/form>
        &lt;/div>
        &lt;table className="table">
          &lt;thead>
            &lt;tr>
              &lt;th>Titulo&lt;/th>
              &lt;th>Discentes&lt;/th>
              &lt;th>Orientador(es)&lt;/th>
              &lt;th>Data de Apresentação&lt;/th>
              &lt;th>PDF&lt;/th>
            &lt;/tr>
          &lt;/thead>
          &lt;tbody>
            {pesquisasfiltradas.map(
              ({ id, titulo, data_apresentacao, discente, docente }) => (
                &lt;tr key={id}>
                  &lt;td>
                    &lt;Link href={`/posts/user/solo/pesquisa/${id}`}>
                      &lt;a className="list-group-item">{titulo}&lt;/a>
                    &lt;/Link>
                  &lt;/td>
                  &lt;td>{discente.nome}&lt;/td>
                  &lt;td>{docente.nome}&lt;/td>
                  &lt;td>{format(parseISO(data_apresentacao), "dd/MM/yyyy")}&lt;/td>
                  &lt;td>
                    &lt;a
                      className="btn btn-sm btn-primary"
                      href={`https://databasebibliotecadigital.undertak3r.repl.co/pesquisa/download/${id}`}
                      download
                    >
                      Download
                    &lt;/a>
                  &lt;/td>
                &lt;/tr>
              )
            )}
          &lt;/tbody>
        &lt;/table>

        &lt;center>
          &lt;div>
            {Array.from(Array(paginas), (pesquisasfiltradas, index) => {
              return (
                &lt;button
                  type="button"
                  className="btn btn-outline-dark"
                  key={index}
                  value={index}
                  onClick={(e) => setPaginasRecorrentes(Number(e.target.value))}
                >
                  {index + 1}
                &lt;/button>
              );
            })}
          &lt;/div>
        &lt;/center>
        &lt;center>
          &lt;form>
            &lt;span>Trabalhos por página: &lt;/span>

            &lt;select onChange={(e) => setItensporPagina(Number(e.target.value))}>
              &lt;option value={5}>5&lt;/option>
              &lt;option selected value={10}>
                10
              &lt;/option>
              &lt;option value={20}>20&lt;/option>
              &lt;option value={50}>50&lt;/option>
            &lt;/select>
          &lt;/form>
        &lt;/center>
      &lt;/div>
    &lt;/div>
  );
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="getServerSideProps.html">getServerSideProps</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Thu Nov 17 2022 08:11:42 GMT-0300 (Horário Padrão de Brasília)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
